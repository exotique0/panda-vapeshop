<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–¢–æ–≤–∞—Ä—ã</title>
    <link rel="stylesheet" href="/admin/static/style.css">
</head>
<body>

<div class="top-nav">
    <div class="nav-left">
        <a href="/admin/products" class="active">–¢–æ–≤–∞—Ä—ã</a>
        <a href="/admin/orders">–ó–∞–∫–∞–∑—ã</a>
        <a href="/admin/orders/create">–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑</a>
        <a href="/admin/orders/archive">–ê—Ä—Ö–∏–≤</a>
    </div>

    <div class="nav-center">
        –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è <span>Panda VapeShop EU</span>
    </div>

    <div class="nav-right">
        <button id="themeToggle">üåô</button>
        <a href="/admin/logout" class="logout">–í—ã–π—Ç–∏</a>
    </div>
</div>

<div class="container">
    <h2>–¢–æ–≤–∞—Ä—ã</h2>

    <div class="card">
        <h3>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h3>
        <form method="post" action="/admin/products" class="form-grid">
            <input name="name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required>
            <input name="price" type="number" step="0.01" placeholder="–¶–µ–Ω–∞" required>
            <input name="quantity" type="number" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" required>
            <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
        </form>
    </div>

    <div class="card">
        <table class="table">
            <tr>
                <th>ID</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–¶–µ–Ω–∞</th>
                <th>–û—Å—Ç–∞—Ç–æ–∫</th>
                <th>+ / ‚àí</th>
                <th>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</th>
                <th></th>
            </tr>

            {% for p in products %}
            <tr>
                <td>{{ p.id }}</td>
                <td>{{ p.name }}</td>
                <td>{{ "%.2f"|format(p.price) }} ‚Ç¨</td>
                <td><b>{{ p.quantity }}</b></td>

                <td>
                    <form method="post" action="/admin/products/update-stock" class="form-inline">
                        <input type="hidden" name="product_id" value="{{ p.id }}">
                        <input name="delta" placeholder="+/-">
                        <button>OK</button>
                    </form>
                </td>

                <td>
                    <form method="post" action="/admin/products/set-stock" class="form-inline">
                        <input type="hidden" name="product_id" value="{{ p.id }}">
                        <input name="quantity" placeholder="–ö–æ–ª-–≤–æ">
                        <button>OK</button>
                    </form>
                </td>

                <td>
                    <form method="post" action="/admin/products/delete"
                          onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é?')">
                        <input type="hidden" name="product_id" value="{{ p.id }}">
                        <button class="danger">‚úñ</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>

<footer class="footer">prod by exotique</footer>

<script>
const toggle = document.getElementById("themeToggle");
if (localStorage.theme === "dark") document.documentElement.dataset.theme = "dark";
toggle.onclick = () => {
    document.documentElement.dataset.theme =
        document.documentElement.dataset.theme === "dark" ? "light" : "dark";
    localStorage.theme = document.documentElement.dataset.theme;
};
</script>

</body>
</html>
