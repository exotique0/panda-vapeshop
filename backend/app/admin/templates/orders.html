{% extends "base.html" %}
{% block title %}Ğ—Ğ°ĞºĞ°Ğ·Ñ‹{% endblock %}
{% set page='orders' %}

{% block content %}
<h2>Ğ—Ğ°ĞºĞ°Ğ·Ñ‹</h2>

<div class="orders-list">
{% for o in orders %}
<div class="order-card">

    <div class="order-header">
        <div class="order-left">
            <div class="order-id">Ğ—Ğ°ĞºĞ°Ğ· #{{ o.id }}</div>
            <span class="status status-{{ o.status }}">
                {{ statuses[o.status] }}
            </span>
        </div>
        <div class="order-price">{{ "%.2f"|format(o.total_price) }} â‚¬</div>
    </div>

    <div class="order-meta">
        ğŸ‘¤ {{ o.customer_name }} &nbsp;
        ğŸ“ {{ o.customer_address }} &nbsp;
        ğŸ†” TG ID: {{ o.customer_telegram_id or "â€”" }}
    </div>

    <ul class="order-items">
        {% for i in o.items %}
            <li>{{ i.product_name }} â€” {{ i.quantity }}</li>
        {% endfor %}
    </ul>

    <div class="order-actions">
        {% for k,v in statuses.items() %}
        <form method="post" action="/admin/orders/status">
            <input type="hidden" name="order_id" value="{{ o.id }}">
            <input type="hidden" name="status" value="{{ k }}">
            <button class="btn-status {{ k }}">{{ v }}</button>
        </form>
        {% endfor %}

        <form method="post" action="/admin/orders/delete"
              onsubmit="return confirm('Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ· ĞĞĞ’Ğ¡Ğ•Ğ“Ğ”Ğ?')">
            <input type="hidden" name="order_id" value="{{ o.id }}">
            <button class="btn-delete">Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ</button>
        </form>
    </div>

</div>
{% endfor %}
</div>
{% endblock %}
